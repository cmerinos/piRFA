% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/piRFA.profile.R
\name{piRFA.profile}
\alias{piRFA.profile}
\title{Profile Plot of DIF for PI-MIMIC Output (Product of Indicators within a Multiple-Indicators Multiple-Causes Framework)}
\usage{
piRFA.profile(
  resultados,
  data,
  item,
  cov,
  thetaRange = c(-3, 3),
  nPoints = 200,
  themeOption = ggplot2::theme_minimal(),
  labels = NULL,
  parType = c("none", "unstd", "std")
)
}
\arguments{
\item{resultados}{Output object from the `piRFA()` function.}

\item{data}{The dataset used in the `piRFA()` analysis.}

\item{item}{The name of the item to be plotted (as a character string).}

\item{cov}{The name of the grouping covariate used in `piRFA()` (as a character string).}

\item{thetaRange}{A numeric vector of length 2 specifying the latent trait range (default is -3 to 3).}

\item{nPoints}{Number of evaluation points along the latent trait (default = 200).}

\item{themeOption}{A `ggplot2` theme object to customize the plot appearance.
Common options include:
`theme_minimal()` (default), `theme_bw()`, `theme_classic()`,
`theme_light()`, `theme_dark()`, `theme_void()`, `theme_gray()`, `theme_linedraw()`,
`theme_test()` and others.}

\item{labels}{Optional vector of labels for the groups. If NULL, the original group names are used.}

\item{parType}{Type of parameters to be used when computing the expected curves:
\itemize{
  \item `"none"`: Ignores parameter estimates from `lavaan` and fixes `Intercept = 0`, `Loading = 1`.
  \item `"unstd"`: Uses unstandardized estimates (`est`) from the fitted `lavaan` model (original scale of the item).
  \item `"std"`: Uses standardized estimates (`std.all`) from the fitted `lavaan` model (standardized metric).
}}
}
\value{
A `ggplot2` object showing the DIF profile for PI-MIMIC output
(Multiple-Indicators Multiple-Causes with Product of Indicators).
}
\description{
This function plots the expected response curves (linear prediction) across levels of the latent trait (θ)
for each group defined by a covariate. It is useful to visually inspect DIF—especially non-uniform DIF.
}
\details{
The function uses the parameter estimates from `piRFA()` to compute predicted responses
for each group along a latent variable continuum. It is especially helpful in visualizing
non-uniform DIF, where the slope or pattern of response varies by group.

The formula used is a linear prediction:
\deqn{y = intercept + loading * theta + direct_effect * group + interaction * (theta × group)}

The choice of `parType` determines how the parameters are applied:
\itemize{
  \item `"none"`: Parameters are fixed at `Intercept = 0`, `Loading = 1`, so the plot only
  reflects the *direct* and *interaction* effects. This isolates the DIF component.
  \item `"unstd"`: Uses unstandardized estimates (`est`) from the fitted `lavaan` model,
  corresponding to the original observed scale of the item.
  \item `"std"`: Uses standardized estimates (`std.all`) from the fitted `lavaan` model,
  making the prediction curves directly comparable across items in a standardized metric.
}

This function assumes a linear model and is best interpreted when DIF is suspected or detected.
}
\examples{
\dontrun{
library(psych)
# Load data
data("bfi")

# Select variables and clean missing values
data.bfi <- bfi[, c("N1", "N2", "N3", "N4", "N5", "gender", "age")]

data.bfi <- data.bfi[complete.cases(data.bfi), ]

data.bfi$gender <- as.factor(data.bfi$gender)

neuro.items <- c("N1", "N2", "N3", "N4", "N5")

library(lavaan)
resultado.gender <- piRFA(data = data.bfi,
                          items = neuro.items,
                          cov = "gender",
                          lvname = "Neuroticismo",
                          est = "ulsmv", Oort.adj = FALSE)

Basic profile plot
piRFA.profile(resultados = resultado.gender,
              data = data.bfi,
              item = "N3",
              cov = "gender")

# Customized plot with labels and parameter type
piRFA.profile(resultados = resultado.gender,
              data = data.bfi,
              item = "N1",
              cov = "gender",
              thetaRange = c(-3, 3),
              nPoints = 200,
              labels = c("Female", "Male"),
              parType = "none", themeOption = "theme_classic")
}

}
